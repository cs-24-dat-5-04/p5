{% extends "layout.html" %}

{% block title %}Course{% endblock %}

{% block content %}
<h1>{{ exercise }}</h1>
<div class="centered">
    <form class="exercise" action="/update_exercise/{{ exercise.exercise_id }}" method="POST">
        <label for="exercise_content">Question</label>
        <textarea type="text" name="exercise_content" rows="2" cols="50">{% if exercise.exercise_content != None %}{{ exercise.exercise_content }}{% endif %}</textarea>
        <label for="exercise_solution">Existing solution</label>
        <textarea type="text" name="exercise_solution" rows="2" cols="50">{% if exercise.exercise_solution != None %}{{ exercise.exercise_solution }}{% endif %}</textarea>
        <input type="submit" value="Submit">
    </form>
</div>
<div class="exercise-proposals centered">
    <textarea readonly type="text" name="prompt_solution" rows="2" cols="50">{{ exercise.proposed_solution_id | get_prompt_completion() }}</textarea>
    <form class="exercise" action="/complete-prompt" method="POST">
        <label for="exercise_solution">Proposed solution</label>
        <input type="hidden" name="system_prompt" value="{{ exercise.lesson_id | get_system_prompt_from_lesson() }}">
        <input type="hidden" name="user_prompt" value="{% if exercise.exercise_content != None %}{{ exercise.exercise_content }}{% endif %}">
        <input type="hidden" name="prompt_id" value="{% if exercise.proposed_solution_id != None %}{{ exercise.proposed_solution_id | get_prompt_completion() }}{% endif %}">
        <input type="hidden" name="exercise_id" value="{{ exercise.exercise_id }}">
        <button type="submit"><span class="material-icons">bolt</span></button>
    </form>
    <!-- <p>system_prompt {{ exercise.lesson_id | get_system_prompt_from_lesson() }}</p>
    <p>user_prompt {% if exercise.exercise_content != None %}{{ exercise.exercise_content }}{% endif %}</p>
    <p>exercise_id {{ exercise.exercise_id }}</p>
    <p style="color: blue">Proposed solution ID {{ exercise.proposed_solution_id }}</p>  -->
    <br>
    <form class="exercise" action="/complete-prompt" method="POST">
        <label for="exercise_solution">Proposed new question</label>
        <textarea readonly type="text" name="prompt_new_question" rows="2" cols="50"></textarea>
        <button type="submit"><span class="material-icons">bolt</span></button>
    </form>
    <br>
    <form class="exercise" action="/complete-prompt" method="POST"></form>
        <label for="exercise_solution">Proposed new solution</label>
        <textarea readonly type="text" name="prompt_new_solution" rows="2" cols="50"></textarea>
        <button type="submit"><span class="material-icons">bolt</span></button>
    </form>
</div>
{% endblock %}